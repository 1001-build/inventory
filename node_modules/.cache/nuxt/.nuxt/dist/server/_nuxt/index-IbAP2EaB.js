import { _ as _sfc_main$1, a as _sfc_main$2, b as _sfc_main$3, c as _sfc_main$4, d as _sfc_main$5, e as _sfc_main$b } from "./CardTitle-B0sT5mvd.js";
import { _ as _sfc_main$6, a as _sfc_main$7, b as _sfc_main$8, c as _sfc_main$9 } from "./FormMessage-D4KeWMj_.js";
import { useForm, Field } from "vee-validate";
import { _ as _sfc_main$a } from "./Input-DoaBkiNg.js";
import { _ as _sfc_main$c } from "./index-D7qPg01d.js";
import __nuxt_component_3 from "./index-CJBfPSQ0.js";
import { computed, resolveDirective, mergeProps, withCtx, createTextVNode, createVNode, unref, withDirectives, createBlock, openBlock, withModifiers, useSSRContext } from "/Users/alsey89/Documents/code/personal/fullstack-nuxt-cf-template/node_modules/vue/index.mjs";
import { ssrRenderComponent, ssrGetDirectiveProps } from "vue/server-renderer";
import { toTypedSchema } from "@vee-validate/zod";
import { passwordResetSchema } from "/Users/alsey89/Documents/code/personal/fullstack-nuxt-cf-template/shared/validators/auth";
import "/Users/alsey89/Documents/code/personal/fullstack-nuxt-cf-template/node_modules/hookable/dist/index.mjs";
import { u as useUserStore } from "./userStore-Tv-JVsac.js";
import { b as useRoute, n as navigateTo } from "../server.mjs";
import "reka-ui";
import "./Label-BGY4UBGc.js";
import "@vueuse/core";
import "class-variance-authority";
import "clsx";
import "tailwind-merge";
import "@iconify/vue";
import "@iconify/utils/lib/css/icon";
import "/Users/alsey89/Documents/code/personal/fullstack-nuxt-cf-template/node_modules/perfect-debounce/dist/index.mjs";
import "pinia";
import "posthog-js";
import "./useShowToast-CtYAVfjv.js";
import "vue-sonner";
import "/Users/alsey89/Documents/code/personal/fullstack-nuxt-cf-template/shared/error/codes";
import "/Users/alsey89/Documents/code/personal/fullstack-nuxt-cf-template/node_modules/ofetch/dist/node.mjs";
import "#internal/nuxt/paths";
import "/Users/alsey89/Documents/code/personal/fullstack-nuxt-cf-template/node_modules/unctx/dist/index.mjs";
import "/Users/alsey89/Documents/code/personal/fullstack-nuxt-cf-template/node_modules/h3/dist/index.mjs";
import "/Users/alsey89/Documents/code/personal/fullstack-nuxt-cf-template/node_modules/defu/dist/defu.mjs";
import "vue-router";
import "/Users/alsey89/Documents/code/personal/fullstack-nuxt-cf-template/node_modules/radix3/dist/index.mjs";
import "/Users/alsey89/Documents/code/personal/fullstack-nuxt-cf-template/node_modules/klona/dist/index.mjs";
import "/Users/alsey89/Documents/code/personal/fullstack-nuxt-cf-template/node_modules/nuxt/node_modules/cookie-es/dist/index.mjs";
import "/Users/alsey89/Documents/code/personal/fullstack-nuxt-cf-template/node_modules/destr/dist/index.mjs";
import "/Users/alsey89/Documents/code/personal/fullstack-nuxt-cf-template/node_modules/ohash/dist/index.mjs";
import "@vue/devtools-api";
import "dayjs";
import "dayjs/plugin/updateLocale.js";
import "dayjs/plugin/relativeTime.js";
import "dayjs/plugin/utc.js";
import "deep-pick-omit";
import "/Users/alsey89/Documents/code/personal/fullstack-nuxt-cf-template/node_modules/@unhead/vue/dist/index.mjs";
const _sfc_main = {
  __name: "index",
  __ssrInlineRender: true,
  setup(__props) {
    const userStore = useUserStore();
    const route = useRoute();
    const token = computed(() => route.query.token);
    const formSchema = toTypedSchema(passwordResetSchema);
    const { handleSubmit, isSubmitting, isFieldDirty } = useForm({
      validationSchema: formSchema
    });
    const onSubmit = handleSubmit(async (values) => {
      await userStore.resetPassword({
        token: token.value,
        newPassword: values.newPassword,
        newPasswordConfirmation: values.newPasswordConfirmation
      });
    });
    const onBackToSignin = () => navigateTo("/auth/signin");
    return (_ctx, _push, _parent, _attrs) => {
      const _component_Card = _sfc_main$1;
      const _component_CardHeader = _sfc_main$2;
      const _component_CardTitle = _sfc_main$3;
      const _component_CardDescription = _sfc_main$4;
      const _component_CardContent = _sfc_main$5;
      const _component_FormField = Field;
      const _component_FormItem = _sfc_main$6;
      const _component_FormLabel = _sfc_main$7;
      const _component_FormMessage = _sfc_main$8;
      const _component_FormControl = _sfc_main$9;
      const _component_Input = _sfc_main$a;
      const _component_CardFooter = _sfc_main$b;
      const _component_Button = _sfc_main$c;
      const _component_Icon = __nuxt_component_3;
      const _directive_auto_animate = resolveDirective("auto-animate");
      _push(ssrRenderComponent(_component_Card, mergeProps({ class: "w-[95%] md:w-[400px] flex flex-col password-reset-form-card" }, _attrs), {
        default: withCtx((_, _push2, _parent2, _scopeId) => {
          if (_push2) {
            _push2(ssrRenderComponent(_component_CardHeader, null, {
              default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  _push3(ssrRenderComponent(_component_CardTitle, null, {
                    default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                      if (_push4) {
                        _push4(`Set New Password`);
                      } else {
                        return [
                          createTextVNode("Set New Password")
                        ];
                      }
                    }),
                    _: 1
                  }, _parent3, _scopeId2));
                  _push3(ssrRenderComponent(_component_CardDescription, null, {
                    default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                      if (_push4) {
                        _push4(`Enter your new password`);
                      } else {
                        return [
                          createTextVNode("Enter your new password")
                        ];
                      }
                    }),
                    _: 1
                  }, _parent3, _scopeId2));
                } else {
                  return [
                    createVNode(_component_CardTitle, null, {
                      default: withCtx(() => [
                        createTextVNode("Set New Password")
                      ]),
                      _: 1
                    }),
                    createVNode(_component_CardDescription, null, {
                      default: withCtx(() => [
                        createTextVNode("Enter your new password")
                      ]),
                      _: 1
                    })
                  ];
                }
              }),
              _: 1
            }, _parent2, _scopeId));
            _push2(`<form class="w-full flex flex-col gap-4"${_scopeId}>`);
            _push2(ssrRenderComponent(_component_CardContent, { class: "flex flex-col gap-2" }, {
              default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  _push3(ssrRenderComponent(_component_FormField, {
                    name: "newPassword",
                    "validate-on-blur": !unref(isFieldDirty)
                  }, {
                    default: withCtx(({ field }, _push4, _parent4, _scopeId3) => {
                      if (_push4) {
                        _push4(ssrRenderComponent(_component_FormItem, { class: "w-full" }, {
                          default: withCtx((_3, _push5, _parent5, _scopeId4) => {
                            if (_push5) {
                              _push5(ssrRenderComponent(_component_FormLabel, mergeProps({ class: "flex items-center justify-between text-sm md:text-base" }, ssrGetDirectiveProps(_ctx, _directive_auto_animate)), {
                                default: withCtx((_4, _push6, _parent6, _scopeId5) => {
                                  if (_push6) {
                                    _push6(`<span${_scopeId5}>New Password</span>`);
                                    _push6(ssrRenderComponent(_component_FormMessage, null, null, _parent6, _scopeId5));
                                  } else {
                                    return [
                                      createVNode("span", null, "New Password"),
                                      createVNode(_component_FormMessage)
                                    ];
                                  }
                                }),
                                _: 2
                              }, _parent5, _scopeId4));
                              _push5(ssrRenderComponent(_component_FormControl, null, {
                                default: withCtx((_4, _push6, _parent6, _scopeId5) => {
                                  if (_push6) {
                                    _push6(ssrRenderComponent(_component_Input, mergeProps({
                                      type: "password",
                                      autocomplete: "new-password",
                                      placeholder: "New Password"
                                    }, field), null, _parent6, _scopeId5));
                                  } else {
                                    return [
                                      createVNode(_component_Input, mergeProps({
                                        type: "password",
                                        autocomplete: "new-password",
                                        placeholder: "New Password"
                                      }, field), null, 16)
                                    ];
                                  }
                                }),
                                _: 2
                              }, _parent5, _scopeId4));
                            } else {
                              return [
                                withDirectives((openBlock(), createBlock(_component_FormLabel, { class: "flex items-center justify-between text-sm md:text-base" }, {
                                  default: withCtx(() => [
                                    createVNode("span", null, "New Password"),
                                    createVNode(_component_FormMessage)
                                  ]),
                                  _: 1
                                })), [
                                  [_directive_auto_animate]
                                ]),
                                createVNode(_component_FormControl, null, {
                                  default: withCtx(() => [
                                    createVNode(_component_Input, mergeProps({
                                      type: "password",
                                      autocomplete: "new-password",
                                      placeholder: "New Password"
                                    }, field), null, 16)
                                  ]),
                                  _: 2
                                }, 1024)
                              ];
                            }
                          }),
                          _: 2
                        }, _parent4, _scopeId3));
                      } else {
                        return [
                          createVNode(_component_FormItem, { class: "w-full" }, {
                            default: withCtx(() => [
                              withDirectives((openBlock(), createBlock(_component_FormLabel, { class: "flex items-center justify-between text-sm md:text-base" }, {
                                default: withCtx(() => [
                                  createVNode("span", null, "New Password"),
                                  createVNode(_component_FormMessage)
                                ]),
                                _: 1
                              })), [
                                [_directive_auto_animate]
                              ]),
                              createVNode(_component_FormControl, null, {
                                default: withCtx(() => [
                                  createVNode(_component_Input, mergeProps({
                                    type: "password",
                                    autocomplete: "new-password",
                                    placeholder: "New Password"
                                  }, field), null, 16)
                                ]),
                                _: 2
                              }, 1024)
                            ]),
                            _: 2
                          }, 1024)
                        ];
                      }
                    }),
                    _: 1
                  }, _parent3, _scopeId2));
                  _push3(ssrRenderComponent(_component_FormField, {
                    name: "newPasswordConfirmation",
                    "validate-on-blur": !unref(isFieldDirty)
                  }, {
                    default: withCtx(({ field }, _push4, _parent4, _scopeId3) => {
                      if (_push4) {
                        _push4(ssrRenderComponent(_component_FormItem, { class: "w-full" }, {
                          default: withCtx((_3, _push5, _parent5, _scopeId4) => {
                            if (_push5) {
                              _push5(ssrRenderComponent(_component_FormLabel, mergeProps({ class: "flex items-center justify-between text-sm md:text-base" }, ssrGetDirectiveProps(_ctx, _directive_auto_animate)), {
                                default: withCtx((_4, _push6, _parent6, _scopeId5) => {
                                  if (_push6) {
                                    _push6(`<span${_scopeId5}>Confirm New Password</span>`);
                                    _push6(ssrRenderComponent(_component_FormMessage, null, null, _parent6, _scopeId5));
                                  } else {
                                    return [
                                      createVNode("span", null, "Confirm New Password"),
                                      createVNode(_component_FormMessage)
                                    ];
                                  }
                                }),
                                _: 2
                              }, _parent5, _scopeId4));
                              _push5(ssrRenderComponent(_component_FormControl, null, {
                                default: withCtx((_4, _push6, _parent6, _scopeId5) => {
                                  if (_push6) {
                                    _push6(ssrRenderComponent(_component_Input, mergeProps({
                                      type: "password",
                                      autocomplete: "new-password",
                                      placeholder: "Confirm New Password"
                                    }, field), null, _parent6, _scopeId5));
                                  } else {
                                    return [
                                      createVNode(_component_Input, mergeProps({
                                        type: "password",
                                        autocomplete: "new-password",
                                        placeholder: "Confirm New Password"
                                      }, field), null, 16)
                                    ];
                                  }
                                }),
                                _: 2
                              }, _parent5, _scopeId4));
                            } else {
                              return [
                                withDirectives((openBlock(), createBlock(_component_FormLabel, { class: "flex items-center justify-between text-sm md:text-base" }, {
                                  default: withCtx(() => [
                                    createVNode("span", null, "Confirm New Password"),
                                    createVNode(_component_FormMessage)
                                  ]),
                                  _: 1
                                })), [
                                  [_directive_auto_animate]
                                ]),
                                createVNode(_component_FormControl, null, {
                                  default: withCtx(() => [
                                    createVNode(_component_Input, mergeProps({
                                      type: "password",
                                      autocomplete: "new-password",
                                      placeholder: "Confirm New Password"
                                    }, field), null, 16)
                                  ]),
                                  _: 2
                                }, 1024)
                              ];
                            }
                          }),
                          _: 2
                        }, _parent4, _scopeId3));
                      } else {
                        return [
                          createVNode(_component_FormItem, { class: "w-full" }, {
                            default: withCtx(() => [
                              withDirectives((openBlock(), createBlock(_component_FormLabel, { class: "flex items-center justify-between text-sm md:text-base" }, {
                                default: withCtx(() => [
                                  createVNode("span", null, "Confirm New Password"),
                                  createVNode(_component_FormMessage)
                                ]),
                                _: 1
                              })), [
                                [_directive_auto_animate]
                              ]),
                              createVNode(_component_FormControl, null, {
                                default: withCtx(() => [
                                  createVNode(_component_Input, mergeProps({
                                    type: "password",
                                    autocomplete: "new-password",
                                    placeholder: "Confirm New Password"
                                  }, field), null, 16)
                                ]),
                                _: 2
                              }, 1024)
                            ]),
                            _: 2
                          }, 1024)
                        ];
                      }
                    }),
                    _: 1
                  }, _parent3, _scopeId2));
                } else {
                  return [
                    createVNode(_component_FormField, {
                      name: "newPassword",
                      "validate-on-blur": !unref(isFieldDirty)
                    }, {
                      default: withCtx(({ field }) => [
                        createVNode(_component_FormItem, { class: "w-full" }, {
                          default: withCtx(() => [
                            withDirectives((openBlock(), createBlock(_component_FormLabel, { class: "flex items-center justify-between text-sm md:text-base" }, {
                              default: withCtx(() => [
                                createVNode("span", null, "New Password"),
                                createVNode(_component_FormMessage)
                              ]),
                              _: 1
                            })), [
                              [_directive_auto_animate]
                            ]),
                            createVNode(_component_FormControl, null, {
                              default: withCtx(() => [
                                createVNode(_component_Input, mergeProps({
                                  type: "password",
                                  autocomplete: "new-password",
                                  placeholder: "New Password"
                                }, field), null, 16)
                              ]),
                              _: 2
                            }, 1024)
                          ]),
                          _: 2
                        }, 1024)
                      ]),
                      _: 1
                    }, 8, ["validate-on-blur"]),
                    createVNode(_component_FormField, {
                      name: "newPasswordConfirmation",
                      "validate-on-blur": !unref(isFieldDirty)
                    }, {
                      default: withCtx(({ field }) => [
                        createVNode(_component_FormItem, { class: "w-full" }, {
                          default: withCtx(() => [
                            withDirectives((openBlock(), createBlock(_component_FormLabel, { class: "flex items-center justify-between text-sm md:text-base" }, {
                              default: withCtx(() => [
                                createVNode("span", null, "Confirm New Password"),
                                createVNode(_component_FormMessage)
                              ]),
                              _: 1
                            })), [
                              [_directive_auto_animate]
                            ]),
                            createVNode(_component_FormControl, null, {
                              default: withCtx(() => [
                                createVNode(_component_Input, mergeProps({
                                  type: "password",
                                  autocomplete: "new-password",
                                  placeholder: "Confirm New Password"
                                }, field), null, 16)
                              ]),
                              _: 2
                            }, 1024)
                          ]),
                          _: 2
                        }, 1024)
                      ]),
                      _: 1
                    }, 8, ["validate-on-blur"])
                  ];
                }
              }),
              _: 1
            }, _parent2, _scopeId));
            _push2(ssrRenderComponent(_component_CardFooter, { class: "flex flex-col gap-2" }, {
              default: withCtx((_2, _push3, _parent3, _scopeId2) => {
                if (_push3) {
                  _push3(ssrRenderComponent(_component_Button, {
                    type: "submit",
                    class: "w-full"
                  }, {
                    default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                      if (_push4) {
                        if (unref(isSubmitting)) {
                          _push4(`<div class="flex items-center justify-center"${_scopeId3}>`);
                          _push4(ssrRenderComponent(_component_Icon, {
                            name: "svg-spinners:90-ring-with-bg",
                            class: "w-5 h-5 animate-spin"
                          }, null, _parent4, _scopeId3));
                          _push4(`<span class="ml-2"${_scopeId3}>Resetting...</span></div>`);
                        } else {
                          _push4(`<div${_scopeId3}> Reset Password </div>`);
                        }
                      } else {
                        return [
                          unref(isSubmitting) ? (openBlock(), createBlock("div", {
                            key: 0,
                            class: "flex items-center justify-center"
                          }, [
                            createVNode(_component_Icon, {
                              name: "svg-spinners:90-ring-with-bg",
                              class: "w-5 h-5 animate-spin"
                            }),
                            createVNode("span", { class: "ml-2" }, "Resetting...")
                          ])) : (openBlock(), createBlock("div", { key: 1 }, " Reset Password "))
                        ];
                      }
                    }),
                    _: 1
                  }, _parent3, _scopeId2));
                  _push3(ssrRenderComponent(_component_Button, {
                    variant: "link",
                    class: "hover:cursor-pointer",
                    onClick: onBackToSignin
                  }, {
                    default: withCtx((_3, _push4, _parent4, _scopeId3) => {
                      if (_push4) {
                        _push4(` Back to Sign In `);
                      } else {
                        return [
                          createTextVNode(" Back to Sign In ")
                        ];
                      }
                    }),
                    _: 1
                  }, _parent3, _scopeId2));
                } else {
                  return [
                    createVNode(_component_Button, {
                      type: "submit",
                      class: "w-full"
                    }, {
                      default: withCtx(() => [
                        unref(isSubmitting) ? (openBlock(), createBlock("div", {
                          key: 0,
                          class: "flex items-center justify-center"
                        }, [
                          createVNode(_component_Icon, {
                            name: "svg-spinners:90-ring-with-bg",
                            class: "w-5 h-5 animate-spin"
                          }),
                          createVNode("span", { class: "ml-2" }, "Resetting...")
                        ])) : (openBlock(), createBlock("div", { key: 1 }, " Reset Password "))
                      ]),
                      _: 1
                    }),
                    createVNode(_component_Button, {
                      variant: "link",
                      class: "hover:cursor-pointer",
                      onClick: onBackToSignin
                    }, {
                      default: withCtx(() => [
                        createTextVNode(" Back to Sign In ")
                      ]),
                      _: 1
                    })
                  ];
                }
              }),
              _: 1
            }, _parent2, _scopeId));
            _push2(`</form>`);
          } else {
            return [
              createVNode(_component_CardHeader, null, {
                default: withCtx(() => [
                  createVNode(_component_CardTitle, null, {
                    default: withCtx(() => [
                      createTextVNode("Set New Password")
                    ]),
                    _: 1
                  }),
                  createVNode(_component_CardDescription, null, {
                    default: withCtx(() => [
                      createTextVNode("Enter your new password")
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              }),
              createVNode("form", {
                class: "w-full flex flex-col gap-4",
                onSubmit: withModifiers(unref(onSubmit), ["prevent"])
              }, [
                createVNode(_component_CardContent, { class: "flex flex-col gap-2" }, {
                  default: withCtx(() => [
                    createVNode(_component_FormField, {
                      name: "newPassword",
                      "validate-on-blur": !unref(isFieldDirty)
                    }, {
                      default: withCtx(({ field }) => [
                        createVNode(_component_FormItem, { class: "w-full" }, {
                          default: withCtx(() => [
                            withDirectives((openBlock(), createBlock(_component_FormLabel, { class: "flex items-center justify-between text-sm md:text-base" }, {
                              default: withCtx(() => [
                                createVNode("span", null, "New Password"),
                                createVNode(_component_FormMessage)
                              ]),
                              _: 1
                            })), [
                              [_directive_auto_animate]
                            ]),
                            createVNode(_component_FormControl, null, {
                              default: withCtx(() => [
                                createVNode(_component_Input, mergeProps({
                                  type: "password",
                                  autocomplete: "new-password",
                                  placeholder: "New Password"
                                }, field), null, 16)
                              ]),
                              _: 2
                            }, 1024)
                          ]),
                          _: 2
                        }, 1024)
                      ]),
                      _: 1
                    }, 8, ["validate-on-blur"]),
                    createVNode(_component_FormField, {
                      name: "newPasswordConfirmation",
                      "validate-on-blur": !unref(isFieldDirty)
                    }, {
                      default: withCtx(({ field }) => [
                        createVNode(_component_FormItem, { class: "w-full" }, {
                          default: withCtx(() => [
                            withDirectives((openBlock(), createBlock(_component_FormLabel, { class: "flex items-center justify-between text-sm md:text-base" }, {
                              default: withCtx(() => [
                                createVNode("span", null, "Confirm New Password"),
                                createVNode(_component_FormMessage)
                              ]),
                              _: 1
                            })), [
                              [_directive_auto_animate]
                            ]),
                            createVNode(_component_FormControl, null, {
                              default: withCtx(() => [
                                createVNode(_component_Input, mergeProps({
                                  type: "password",
                                  autocomplete: "new-password",
                                  placeholder: "Confirm New Password"
                                }, field), null, 16)
                              ]),
                              _: 2
                            }, 1024)
                          ]),
                          _: 2
                        }, 1024)
                      ]),
                      _: 1
                    }, 8, ["validate-on-blur"])
                  ]),
                  _: 1
                }),
                createVNode(_component_CardFooter, { class: "flex flex-col gap-2" }, {
                  default: withCtx(() => [
                    createVNode(_component_Button, {
                      type: "submit",
                      class: "w-full"
                    }, {
                      default: withCtx(() => [
                        unref(isSubmitting) ? (openBlock(), createBlock("div", {
                          key: 0,
                          class: "flex items-center justify-center"
                        }, [
                          createVNode(_component_Icon, {
                            name: "svg-spinners:90-ring-with-bg",
                            class: "w-5 h-5 animate-spin"
                          }),
                          createVNode("span", { class: "ml-2" }, "Resetting...")
                        ])) : (openBlock(), createBlock("div", { key: 1 }, " Reset Password "))
                      ]),
                      _: 1
                    }),
                    createVNode(_component_Button, {
                      variant: "link",
                      class: "hover:cursor-pointer",
                      onClick: onBackToSignin
                    }, {
                      default: withCtx(() => [
                        createTextVNode(" Back to Sign In ")
                      ]),
                      _: 1
                    })
                  ]),
                  _: 1
                })
              ], 40, ["onSubmit"])
            ];
          }
        }),
        _: 1
      }, _parent));
    };
  }
};
const _sfc_setup = _sfc_main.setup;
_sfc_main.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("pages/auth/password/reset/index.vue");
  return _sfc_setup ? _sfc_setup(props, ctx) : void 0;
};
export {
  _sfc_main as default
};
//# sourceMappingURL=index-IbAP2EaB.js.map
