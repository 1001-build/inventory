import{c as E,_ as L,a as A,b as H}from"./CM1mw80p.js";import{e as U,j as z,x as G,f as J,k as K,v as C,l,w as e,m as O,o as a,b as s,a as r,d as m,p as Q,h as n,q as P,s as g,c as y}from"./DcS_IoLn.js";import{_ as W}from"./ByNGr5JG.js";import{_ as X}from"./CRIyQ5VA.js";import{a as Y,t as Z,p as ss,F as es,_ as ts,b as os,c as as,d as ns}from"./Cz7H0uik.js";import{_ as rs}from"./DxX4PbHm.js";import is from"./B7FLhmS-.js";import{_ as ls}from"./0EevIDD-.js";import{u as ms}from"./jfAtkETX.js";import"./C5eF55Z1.js";import"./C1or8vyg.js";import"./B9UWe-Zm.js";import"./BdSqjPKa.js";const _s={key:0,class:"flex items-center justify-center"},cs={key:1},$s={__name:"index",setup(ds){const S=U(),$=z(),F=K(),_=G(()=>$.query.token);J(()=>{_.value||(F({title:"Invalid Reset Link",description:"The password reset link is invalid or has expired."}),C("/auth/password/reset/request")),ms({identifier:".password-reset-form-card"})});const h=Z(ss),{handleSubmit:N,isSubmitting:T,isFieldDirty:c}=Y({validationSchema:h}),d=N(async i=>{await S.resetPassword({token:_.value,newPassword:i.newPassword,newPasswordConfirmation:i.newPasswordConfirmation})}),B=()=>C("/auth/signin");return(i,t)=>{const I=A,R=W,j=L,f=as,u=os,p=rs,w=ns,x=ts,v=es,D=H,q=is,b=ls,M=X,V=E,k=O("auto-animate");return a(),l(V,{class:"w-[95%] md:w-[400px] flex flex-col password-reset-form-card"},{default:e(()=>[s(j,null,{default:e(()=>[s(I,null,{default:e(()=>t[1]||(t[1]=[m("Set New Password")])),_:1,__:[1]}),s(R,null,{default:e(()=>t[2]||(t[2]=[m("Enter your new password")])),_:1,__:[2]})]),_:1}),r("form",{class:"w-full flex flex-col gap-4",onSubmit:t[0]||(t[0]=Q((...o)=>n(d)&&n(d)(...o),["prevent"]))},[s(D,{class:"flex flex-col gap-2"},{default:e(()=>[s(v,{name:"newPassword","validate-on-blur":!n(c)},{default:e(({field:o})=>[s(x,{class:"w-full"},{default:e(()=>[P((a(),l(u,{class:"flex items-center justify-between text-sm md:text-base"},{default:e(()=>[t[3]||(t[3]=r("span",null,"New Password",-1)),s(f)]),_:1,__:[3]})),[[k]]),s(w,null,{default:e(()=>[s(p,g({type:"password",autocomplete:"new-password",placeholder:"New Password"},o),null,16)]),_:2},1024)]),_:2},1024)]),_:1},8,["validate-on-blur"]),s(v,{name:"newPasswordConfirmation","validate-on-blur":!n(c)},{default:e(({field:o})=>[s(x,{class:"w-full"},{default:e(()=>[P((a(),l(u,{class:"flex items-center justify-between text-sm md:text-base"},{default:e(()=>[t[4]||(t[4]=r("span",null,"Confirm New Password",-1)),s(f)]),_:1,__:[4]})),[[k]]),s(w,null,{default:e(()=>[s(p,g({type:"password",autocomplete:"new-password",placeholder:"Confirm New Password"},o),null,16)]),_:2},1024)]),_:2},1024)]),_:1},8,["validate-on-blur"])]),_:1}),s(M,{class:"flex flex-col gap-2"},{default:e(()=>[s(b,{type:"submit",class:"w-full"},{default:e(()=>[n(T)?(a(),y("div",_s,[s(q,{name:"svg-spinners:90-ring-with-bg",class:"w-5 h-5 animate-spin"}),t[5]||(t[5]=r("span",{class:"ml-2"},"Resetting...",-1))])):(a(),y("div",cs," Reset Password "))]),_:1}),s(b,{variant:"link",class:"hover:cursor-pointer",onClick:B},{default:e(()=>t[6]||(t[6]=[m(" Back to Sign In ")])),_:1,__:[6]})]),_:1})],32)]),_:1})}}};export{$s as default};
